<!DOCTYPE html>
<html lang="en">
  <head>
    <title>To do List</title>
    <link rel="stylesheet" href="hello.css">
    <script type="text/javascript" charset="utf-8">
    document.addEventListener(
    'DOMContentLoaded', () => {
        const inputField = document.getElementById('inp1');
        const submitButton = document.getElementById('butto1');
        const taskList = document.getElementById('task-list');

        submitButton.addEventListener('click', addTask);
        loadTasks();
        

        function addTask() {
            const taskText = inputField.value;

            if (taskText.trim() !== '') {
                const newTask = document.createElement('li');
                
                
                const editButton = document.createElement('button');
                editButton.textContent = '✍️'; 
                editButton.classList.add('edit-btn');
                editButton.addEventListener('click', editTask);

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'completed';
                deleteButton.classList.add('delete-btn');
                deleteButton.addEventListener('click', deleteTask);
                
                
                const taskTextNode = document.createTextNode(taskText);
                newTask.appendChild(taskTextNode);
                newTask.appendChild(editButton);
                newTask.appendChild(deleteButton);
                
                taskList.appendChild(newTask);
                inputField.value = '';
                
                saveTasks();
            }
        }

        function deleteTask(event) {
            const taskToRemove = event.target.parentNode;
            taskList.removeChild(taskToRemove);
            saveTasks(); 
        }

        function editTask(event) {
            const taskToEdit = event.target.parentNode;
            const originalText = taskToEdit.firstChild.textContent;
            
            const editInput = document.createElement('input');
            editInput.type = 'text';
            editInput.value = originalText;
            editInput.classList.add('edit-input');

            taskToEdit.firstChild.replaceWith(editInput);

            const editButton = event.target;
            editButton.textContent = 'Save';
            editButton.removeEventListener('click', editTask);
            editButton.addEventListener('click', saveTask);
        }

        function saveTask(event) {
            const taskToSave = event.target.parentNode;
            const editInput = taskToSave.querySelector(".edit-input");
            const newText = editInput.value.trim();
            
            if (newText !== '') {
                const newTextNode = document.createTextNode(newText);
                editInput.replaceWith(newTextNode);
                
                const saveButton = event.target;
                saveButton.textContent = '✍️';
                saveButton.removeEventListener('click', saveTask);
                saveButton.addEventListener('click', editTask);
            } else {
                const originalText = editInput.value;
                const originalTextNode = document.createTextNode(originalText);
                editInput.replaceWith(originalTextNode);
                
                const saveButton = event.target;
                saveButton.textContent = '✍️';
                saveButton.removeEventListener('click', saveTask);
                saveButton.addEventListener('click', editTask);
            }
            saveTasks(); 
        }
        
        function saveTasks() {
            const tasks = [];
            taskList.querySelectorAll('li').forEach(taskItem => {
                const taskText = taskItem.firstChild.textContent;
                tasks.push(taskText);
            });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks'));
            if (tasks) {
                tasks.forEach(taskText => {
                    const newTask = document.createElement('li');
                    
                    const editButton = document.createElement('button');
                    editButton.textContent = '✍️'; 
                    editButton.classList.add('edit-btn');
                    editButton.addEventListener('click', editTask);

                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'completed';
                    deleteButton.classList.add('delete-btn');
                    deleteButton.addEventListener('click', deleteTask);
                    
                    const taskTextNode = document.createTextNode(taskText);
                    newTask.appendChild(taskTextNode);
                    newTask.appendChild(editButton);
                    newTask.appendChild(deleteButton);
                    
                    taskList.appendChild(newTask);
                });
            }
        }
    }
);

    
  
    </script>
    
    
  </head>
  <body>
    <form class="input-form">
      <input type="text" name="task" id="inp1" placeholder="Enter the task" />
      <button id="butto1" class="button" type="button">submit</button>
    
    </form>
    <ul id="task-list">
      
    </ul>
    
  </body>

</html>
